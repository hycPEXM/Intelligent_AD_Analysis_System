## 作品简介

本作品使用Taurus和Pegasus套件，基于YoloV2目标检测算法和改进的SORT目标跟踪算法，实现了以下功能：

- 将Taurus套件部署在电子广告屏、海报等商业广告正上方的位置，它可以实时统计并且分析画面中人群的注意力分布，具体而言，它可以检测、跟踪画面中的行人，并把他们分为两类：正在看广告的人与没有在看广告的人；检测 + 跟踪可以粗略地统计人流量；对于一个特定的被跟踪的人，我们可以统计他出现在画面中的这段时间里看了多长时间的广告，这段时间称为注意力时长；我们定义了一个**广告吸引度**的量化评价指标，可以用来评估广告的宣传效果，它是一个人均的概念，与从广告前路过的人流量无关，因此可以避免跟踪算法误增行人ID的情况
- PC端的UI界面有以下几种功能：
  - 可以与Taurus通过有线/无线网络进行交互，PC可以控制Taurus启动、停止分析算法，可以选择某张广告进行投放并设置投放时长
  - 启动算法后，Taurus将人群注意力分析模型AD Analysis的实时数据，包括当前帧注意人数、非注意人数、广告吸引度、总的人群注意力时长通过网络传输到PC端，在PC端上利用这些回传数据的实时更新变化曲线，从而实现了实时可视化
  - PC端UI程序可以保存历史记录，以便于对每次投放的广告进行后续的数据分析处理
  - 智能投放策略的建议：选择不同的广告进行分配投放时长的分析，最终会给出一张饼图，表示哪个时间段应该投放哪个广告
  - 3516将实时处理画面通过RTSP协议推流至PC UI进行显示

- 3861的作用
  - 人体红外模块：感知场景里是否有人经过，若有则开启分析算法，若无则暂停分析
  - OLED：通过文字提示人体红外模块是否检测到行人
  - 光敏电阻与补光灯：当光敏电阻检测到光线不足时，LED亮度会增加，起到一个补光的作用，确保分析算法的准确性




我们认为本作品的主要用途有两点：

- 针对同一厂家的不同产品，商家可以根据它们的广告吸引度来分配投放时长，提高广告投资宣传的性价比
- 针对同一厂家同一产品的不同广告设计，可以评估不同广告设计的宣传效果，选出最优的广告设计方案，为商家制作更具宣传力的广告提供借鉴



## 代码介绍

`code`目录下

- `IoT2023UI`：PC端UI界面的C++ QT源代码
- `mpp_help`：修改了一些默认参数值
- `nnie`：实现了YoloV2目标检测算法，SORT目标跟踪算法，Taurus与PC进行通信、交互等功能
- `3861`：Hi3861相关的代码
- `rtsp`：rtsp推流实时处理画面的相关依赖
- `ShowAD_File`：3516通过HDMI显示广告，实现智慧屏功能
- `svp_common`：添加`SAMPLE_COMM_IVE_VbInit_Yolov2_test`、`SAMPLE_COMM_IVE_StartViVpssVencVo_Yolov2_test`、`SAMPLE_COMM_IVE_StopViVpssVencVo_Yolov2_test`的函数定义，为在sample_nnie.c中rtsp推流ai process的实时处理画面提供支持
- 编译相关：`Makefile`、`nnie.mk`、`adshownew.mk`
- `sort.py`：改进的SORT算法的python实现


